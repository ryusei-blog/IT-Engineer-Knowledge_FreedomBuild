---
create_date: 2025-10-02
update_date: 2025-10-02
version: 1.0
model: GPT-5-Thinking-medium
prompt: |+
  - `010_基礎理論/020_離散数学_集合_命題_確率_期待値/000_講義.md`の講義コンテンツを作成してください。
---
# 離散数学の基礎：集合・命題・確率・期待値（FE/AP合格レベルの徹底整理）

本講義は、初学者がつまずきやすい離散数学のコア領域「集合・命題・確率・期待値」を一つの流れで学べるように構成します。

ですます調で簡潔に、かつ試験対策に直結する形で説明します。

演習とコード例で実感を伴う理解を目指します。

## はじめに（ゴールと前提の明確化）

本講義の到達目標を最初に明示します。

読み終えたとき、あなたは次のことが自力でできるようになります。

1. 基本用語（集合、部分集合、ド・モルガンの法則、命題、真理値表、条件付き確率、期待値）を正確に定義できます。
2. 典型問題の「問われ方の型」を見抜き、最短経路で正答に至る手順を適用できます。
3. 簡単な擬似言語やPythonで集合演算や確率・期待値計算を実装し、計算量や分岐の観点をコメントできます。
4. ひっかけ選択肢に対して、誤りパターンを逆手に取って排除できます。

想定読者は、IT未経験〜初学者、FE受験者、AP受験者です。

前提知識は、中学数学の四則演算と割合、そしてPythonのprintが分かる程度とします。

試験では「定義に即した判断」「公式の当てはめ」「言い換えと真偽判定」「数え上げの整理」が頻出です。

## シラバス対応と全体像

本テーマはFE/APの「基礎理論（離散数学）」に対応します。

位置づけは次のとおりです。

集合は「対象の整理の言語」です。

命題は「真偽で記述する論理の言語」です。

確率と期待値は「不確実性を数で扱う道具」です。

この三者は、データ構造・アルゴリズム・セキュリティ（論理的証明やリスク計算）など横断領域の基礎になります。

まず用語の見取り図を頭に置きます。

1. 対象を集める（集合）
2. 主張を論理化する（命題）
3. 不確実性を数量化する（確率）
4. 平均的な結果を読む（期待値）

という流れです。

### キーターム一覧

下表は「用語→一言定義→試験での観点」を最短で掴むためのマップです。

| 用語 | 一言定義 | 試験観点 |
|---|---|---|
| 集合 (A) | 要素を集めたもの | 記法・包含関係・演算 |
| 部分集合 | (Asubseteq B) なら (A)の全要素が(B)に含まれる | 真部分集合との違い |
| 全体集合 (U) | 議論の対象のすべて | 補集合の基準 |
| 和集合 (Acup B) | (A)または(B)に属する要素 | 包含排他の混同に注意 |
| 共通集合 (Acap B) | (A)かつ(B)に属する要素 | ベン図で可視化 |
| 補集合 (A^c) | (U)から(A)を除いた集合 | ド・モルガンの法則 |
| ド・モルガンの法則 | ((Acup B)^c=A^ccap B^c)、((Acap B)^c=A^ccup B^c) | 否定の分配 |
| 命題 | 真か偽のいずれかの文 | 真理値、論理演算 |
| 否定 (neg p) | (p)の真偽を反転 | 二重否定に注意 |
| 論理和 (plor q) | どちらかが真なら真 | 包含的「または」 |
| 論理積 (pland q) | 両方真なら真 | 条件の同時成立 |
| 含意 (pRightarrow q) | (p)ならば(q) | 反例と真理値表 |
| 同値 (pLeftrightarrow q) | 双方向の含意 | 定義の言い換え |
| 余事象 | 起こらない事象 | (1-P(A)) |
| 排反事象 | 同時に起きない事象 | 加法定理の簡略 |
| 独立事象 | 互いに影響しない | (P(Acap B)=P(A)P(B)) |
| 条件付き確率 | 条件下の確率 | (P(Amid B)=frac{P(Acap B)}{P(B)}) |
| ベイズの定理 | 前確率から事後確率へ更新 | 表の分母注意 |
| 期待値 (E[X]) | 平均的な結果 | 離散：(sum x p(x)) |

## 基本概念と直感的理解

まずは比喩で直感を得ます。  
次に定義で補正します。

集合は「箱分け」です。  
同じ性質を持つものを一つの箱に入れる作業だと考えます。  
箱を重ねて重なりを見ると交差や包含が見えます。

命題は「Yes/Noの針を伴う主張」です。  
真理値表はその針の動くパターン表です。  
「ならば」はしばしば日常語感と逆方向に感じますが、「嘘つき検出」を思い出すと良いです。  
「もし雨なら傘」は、雨で傘なら筋が通り、雨で傘なしは矛盾です。  
雨でないときは約束の検証対象外で矛盾はありません。

確率は「大量に繰り返すと出現頻度が収束する割合」です。  
期待値は「ガチャの平均石消費」や「くじの平均損益」と同じ感覚です。  
一回一回はぶれますが、長い目で見た中心です。

ひっかけアンチパターンを先回りで潰します。

- (Asubset B) と (Asubseteq B) の混同
- 論理和は排他的と勘違い
- 条件付き確率で分母を (P(A)) と書く誤り
- 期待値を最頻値と混同

これらはすべて定義に立ち返れば解けます。

### 正確な定義

要点だけを箇条書きにします。  
長文は避けます。

- 集合は重複を持たない要素の集まりです。
- 部分集合は要素包含で定義されます。
- 和集合は「または」、共通集合は「かつ」です。
- 補集合は全体集合を基準に定義します。
- ド・モルガンの法則は否定が和と積を交換することを表します。
- 命題は真偽のいずれかをとる文です。
- 否定、論理和、論理積、含意、同値の真理値は真理値表で定義します。
- 含意 (pRightarrow q) の偽は唯一「(p)が真、かつ(q)が偽」の場合です。
- 事象は標本空間の部分集合です。
- 確率は事象に対して (0le P(A)le 1)、(P(U)=1) を満たします。
- 加法定理：(P(Acup B)=P(A)+P(B)-P(Acap B)) です。
- 乗法定理：(P(Acap B)=P(Amid B),P(B)) です。
- 条件付き確率：(P(Amid B)=frac{P(Acap B)}{P(B)})（(P(B)>0)）です。
- ベイズの定理：(P(Amid B)=frac{P(Bmid A)P(A)}{P(B)}) です。
- 離散確率変数の期待値：(E[X]=sum_x x,P(X=x)) です。

### ミニ図解と言語化

図なしで因果を文章で押さえます。

1. 入力（集合 (A,B,U) と命題 (p,q) と事象 (A,B)）。
2. 処理（集合演算や論理演算で条件を組み立てる。  
   確率では加法・乗法・条件付きを選ぶ）。
3. 出力（欲しい量：要素数、真理値、確率、期待値）。

集合の典型タスクは「全体→重なり→不足を補う」です。

命題は「否定を配る→基本形（CNF/DNFに近い形）→表で検算」です。

確率は「標本空間の分割→加法か乗法か→条件付きの分母確認→最後に数値代入」です。

## 典型問題への橋渡し（FE/AP試験対策）

問われ方の型を3パターンだけ覚えます。

1. **定義直撃型**  
   例：「((Acup B)^c) を (A^c,B^c) で表せ」→ド・モルガン。
2. **言い換え真偽型**  
   例：「(pRightarrow q) と等価な命題を選べ」→(neg plor q)。
3. **確率の分割・条件型**  
   例：「テストの精度と陽性率から実際に病気である確率」→ベイズ。

解法フレームは次の5手順です。

1. 用語・記号の対応表を書く。
2. 図（ベン図・真理値表・樹形図）を最小でよいから下書きする。
3. 定義・公式に正規化する（否定を配る、分割する）。
4. 数値代入は最後にまとめて行う。
5. 反例・単位・分母ゼロをチェックする。

### 例題（初級）

**問題文**。  
全体集合 (U) に対し、((Acup B)^c) を (A^c,B^c) を用いて表しなさい。

**考え方**。  
否定が和と積を交換する法則があったことを思い出します。

**最短解法**。  
ド・モルガンの法則を適用します。

**正解**。  
((Acup B)^c=A^ccap B^c)。

**誤答の主因**。  
「排他的または」のイメージで混乱し、((A^ccup B^c)) とする誤り。

**復習メモ**。  
否定は境界線の「外側」を取る操作です。  
外側は両方外に出すので交わりになります。

### 例題（中級）

**問題文**。  
ある病気の有病率は (1%)。  
検査は病気なら陽性になる確率 (0.95)。  
病気でないのに陽性になる確率 (0.02)。  
ある人が陽性だったとき、実際に病気である確率を求めなさい。

**考え方**。  
事象を「病気 (D)」「陽性 (+)」とします。  
ベイズの定理 (P(Dmid +)=frac{P(+mid D)P(D)}{P(+)}) を使います。

**最短解法**。  
分母 (P(+)) は全確率で (P(+)=P(+mid D)P(D)+P(+mid neg D)P(neg D))。
数値代入します。

**正解**。  
(P(D)=0.01)、(P(+mid D)=0.95)、(P(+mid neg D)=0.02)、(P(neg D)=0.99)。  
よって (P(+)=0.95times 0.01+0.02times 0.99=0.0095+0.0198=0.0293)。  
したがって (P(Dmid +)=dfrac{0.95times 0.01}{0.0293}approx0.3246)（約32.5%）。

**誤答の主因**。  
分母を (P(D)) と誤る。  
または (P(+)) を (0.95) と読み替えてしまう早合点。

**復習メモ**。  
分母は「陽性になるすべての道の合計」です。  
樹形図で二通り（病気→陽性、非病気→陽性）を加えます。

## 擬似言語／Pythonで理解を固定化

ここではFE準拠の擬似言語とPythonの最小コードを示します。

各行に意図コメントを入れます。

分岐・反復・計算量に軽く触れます。

**目的：集合演算（和・積・差・補）の最小実装（Python）**

```python
# 集合演算の最小実装
U = set(range(1, 11))         # 全体集合（1..10）
A = {1, 2, 3, 5}              # 集合A
B = {3, 4, 5, 6}              # 集合B

union = A | B                 # 和集合：要素を合わせる
inter = A & B                 # 共通集合：重なり
diff  = A - B                 # 差集合：Aにのみ含まれる
compA = U - A                 # 補集合：U基準でAの外側

print(union, inter, diff, compA)  # O(|A|+|B|)程度
```

**目的：命題 (pRightarrow q) を真理値表で評価（擬似言語）**

```text
# 擬似言語：含意の真理値を全探索
# 入力：pとqの真偽の全組合せ
# 出力：p->q の真理値
FOR p IN {True, False}:
  FOR q IN {True, False}:
    IF p = True AND q = False THEN
      r <- False               # 唯一の偽ケース
    ELSE
      r <- True
    PRINT p, q, r
# 計算量は4ケースなのでO(1)だが、n命題ならO(2^n)
```

**目的：条件付き確率とベイズの定理の関数化（Python）**

```python
def bayes(p_a, p_b_given_a, p_b_given_not_a):
    """ベイズの定理で P(A|B) を返す"""
    p_not_a = 1 - p_a                       # 余事象
    p_b = p_b_given_a * p_a + p_b_given_not_a * p_not_a  # 全確率
    return (p_b_given_a * p_a) / p_b

print(bayes(0.01, 0.95, 0.02))  # ≈ 0.3246
```

**ミニユースケース：A/Bテストの期待値**

```python
# クリック率の期待値：2案の加重平均
pA, convA = 0.6, 0.05        # A案の配信比率とCVR
pB, convB = 0.4, 0.06        # B案
expected = pA * convA + pB * convB
print(expected)               # 期待コンバージョン率。線形性 E[aX+bY]=aE[X]+bE[Y]
```

上の例では期待値の線形性を体感できます。

分岐はなく、計算量は定数です。

業務ではKPI設計や勝者判定の根拠に直結します。

## セキュリティ／運用・性能の視点（横断観点）

セキュリティでは確率と期待値がリスク評価に直結します。  
「脅威の発生確率×損害額」の期待損失で対策の費用対効果を比較します。  
独立とみなせない事象の過小評価に注意します。  
たとえば脆弱性が共通のコンポーネントに依存すると事象は相関しやすくなります。

運用ではSLAの可用性積を扱います。  
システムAとBを直列に接続すると可用性は (A_v times B_v) です。  
冗長化の並列構成では (1-(1-A_v)(1-B_v)) です。  
集合の補集合と同じ発想で「落ちない確率＝1−（両方落ちる確率）」と読み替えられます。

性能では確率変数としてリクエスト到着や処理時間を捉え、期待値がスループットや平均応答時間に現れます。  
外れ値が多い分布では平均より中央値や分位点を見る判断も重要です。  
試験では定義の確認が中心ですが、実務感覚を持つと記憶が安定します。

## 演習問題

**問1（初級：ド・モルガン）**  
全体集合 (U) に対し、((Acap B)^c) を (A^c,B^c) で表しなさい。

- 正解  
  (A^ccup B^c)。
- 解説  
  否定が積を和に変える性質です。  
  ベン図で「重なりの外側」が「どちらかの外側」と一致します。
- 誤答で陥りがちな思考  
  和と積の向きを逆にする。
- 類題への拡張ヒント  
  三集合版 ((Acap Bcap C)^c) を考えて一般化を確認しましょう。

**問2（初級：含意の等価変形）**  
(pRightarrow q) と等価なものを選べ。

1. (pland q)
2. (neg plor q)
3. (neg(plor q))

- 正解  
  2
- 解説  
  定義により (pRightarrow q) は唯一偽のケース ((p=mathrm{T},q=mathrm{F})) を除く形で、(neg plor q) と一致します。
- 誤答で陥りがちな思考  
  1は強すぎる条件、3は否定の位置が違います。
- 類題への拡張ヒント  
  対偶 (neg qRightarrow neg p) と同値であることも真理値表で確認しましょう。

**問3（中級：条件付き確率）**。  
カードを一枚引く。  
赤の確率は (1/2)。  
赤であったという条件の下で、ハートである確率を求めなさい。  
ただし、各マークは等確率です。

- 正解  
  (P(text{ハート}mid text{赤})=dfrac{1/4}{1/2}=1/2)。
- 解説  
  分母は「赤になる確率」  
  分子は「赤かつハート」
- 誤答で陥りがちな思考  
  分母に (P(text{ハート})) を置く誤り。
- 類題への拡張ヒント  
  2枚引きや条件追加（戻さない）に拡張して、独立性の崩れを観察しましょう。

**問4（中級：期待値）**  
サイコロを1回振る。  
出た目を (X) とする。  
(Y=3X-2) の期待値を求めなさい。

- 正解  
  (E[Y]=3E[X]-2) より (E[X]=3.5)、よって (E[Y]=3times 3.5-2=8.5)。
- 解説  
  期待値の線形性をそのまま適用します。
- 誤答で陥りがちな思考  
  目の分布を列挙し直して計算誤りを起こす。
- 類題への拡張ヒント  
  (Y=aX+b) の一般形にしてパラメータ依存を確認しましょう。

## 学びを定着させる復習計画

復習は短い間隔で繰り返すのが最効率です。  
次の3つのチェックポイントを回します。

- **5分後**  
  本講義のキーターム一覧を見ずに、空の紙に「集合演算」「論理演算」「加法・乗法・条件付き」  「期待値の定義」を箇条書きで再現します。
- **15分後**  
  例題（中級）を解き直し、数式展開を声に出して説明します。  
  真理値表・樹形図・分割表のいずれかを別表現で描いてみます。
- **翌日**  
  新しい数値でベイズ計算と期待値計算を自作し、Pythonでチェックします。  
  誤りが出た箇所だけキーターム表に追記して自分用の暗記カードにします。

橋渡しとして次を学ぶと理解が加速します。

- データ構造（集合とハッシュ集合の関係）
- 計算量（真理値表の組合せ爆発とオーダー） 
- 統計の基礎（分散・標準偏差と期待値の関係）

## よくある質問（FAQ）

**Q1．論理和は「どちらか一方だけが真」ですか。**    
いいえ。  
論理和 (plor q) は包含的「または」で、どちらか一方でも両方でも真なら真です。  
排他的またはは (poplus q) と表記します。

**Q2．含意が直感に反します。**  
なぜ (p=mathrm{F}) だと (pRightarrow q) が真になるのですか。  
約束「もし(p)なら(q)」は、(p)が成立しない状況では検証対象外です。  
矛盾を生まないため「真」と扱います。  
反例の唯一の形「(p=mathrm{T},q=mathrm{F})」だけが偽です。

**Q3．条件付き確率で分母をいつも (P(A)) にしてしまいます。**  
分母は「条件の確率」です。  
(P(Amid B)=frac{P(Acap B)}{P(B)}) なので、条件が (B) なら分母は (P(B)) です。  
慣れるまでは分母に「条件」を赤で書く習慣を持ちましょう。

**Q4．期待値が高い方が必ず得ですか。**  
平均としては有利ですが、分散が大きいとリスクが増します。  
試験では主に期待値だけを問いますが、実務では分散やCVaRなども併せて判断します。

**Q5．三集合の式が覚えられません。**  
ベン図で領域を塗り分けるか、ド・モルガンを段階的に適用してください。  
式は後からついてきます。

## まとめ

本講義では、集合・命題・確率・期待値を定義→図解的言語化→典型問題→コード→横断観点→演習→復習の流れで学びました。

試験での鍵は、定義と公式に正規化し、分母や否定の配り方を機械的に処理することです。

期待値の線形性、含意の等価変形、ド・モルガン、条件付き確率の分母の三点を最優先で暗記し、図と表で確認してください。

演習で誤答の主因を自分の言葉でメモし、翌日にPythonで再検算すると記憶が固まります。